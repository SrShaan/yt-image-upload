<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Upload Image for YouTube Comment</title>
  <style>
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:0;background:#0b1220;color:#e6e8ee}
    .wrap{max-width:720px;margin:0 auto;padding:24px}
    .card{background:#121a2b;border:1px solid #26334d;border-radius:16px;padding:24px;box-shadow:0 6px 24px rgba(0,0,0,.25)}
    h1{font-size:22px;margin:0 0 12px}
    p{opacity:.85}
    .row{display:flex;gap:12px;flex-wrap:wrap;margin:16px 0}
    input[type="text"], input[type="file"]{width:100%}
    .btn{background:#3b82f6;border:none;padding:12px 16px;border-radius:10px;color:#fff;font-weight:600;cursor:pointer}
    .btn.secondary{background:#2b374f}
    .btn:disabled{opacity:.6;cursor:not-allowed}
    #drop{border:2px dashed #3b82f6;border-radius:12px;padding:22px;text-align:center;background:#0f1627}
    #preview{max-width:100%;border-radius:10px;margin-top:12px;display:none}
    .muted{font-size:12px;opacity:.7}
    .out{background:#0f1627;border-radius:10px;padding:12px;margin-top:12px;word-break:break-all}
    progress{width:100%;height:12px;border-radius:8px}
    .pill{display:inline-block;background:#1f2a44;border:1px solid #32425f;padding:4px 8px;border-radius:999px;font-size:12px;margin-left:6px}
    a{color:#93c5fd}
    .grid{display:grid;grid-template-columns:1fr;gap:10px}
    @media (min-width:560px){.grid{grid-template-columns:1fr auto}}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>Upload Image â†’ Get Link for YouTube Comment</h1>
      <p class="muted">1) Select or drop an image  2) Upload  3) Copy the link and paste it in your YouTube comment.</p>

      <div class="row">
        <div class="grid">
          <input id="apiKey" type="text" placeholder="Enter your ImgBB API key" />
          <button class="btn secondary" id="saveKey">Save Key</button>
        </div>
        <div id="drop">
          <strong>Drop image here</strong> or click to choose
          <input id="file" type="file" accept="image/*" style="display:none" />
          <img id="preview" alt="preview" />
        </div>
        <div class="row" style="width:100%;margin:0">
          <progress id="prog" value="0" max="100" style="display:none"></progress>
        </div>
        <div class="row" style="width:100%">
          <button id="uploadBtn" class="btn" disabled>Upload to ImgBB</button>
          <button id="copyBtn" class="btn secondary" disabled>Copy Link</button>
        </div>
        <div id="output" class="out" style="display:none"></div>
        <div class="muted">Tips: Max ~32MB per file (ImgBB). PNG/JPG/WebP recommended. By uploading you agree content is yours and safe-for-work.</div>
      </div>
    </div>
  </div>

<script>
  // Simple helper for localStorage of API key
  const apiKeyInput = document.getElementById('apiKey');
  const saveKeyBtn = document.getElementById('saveKey');
  const uploadBtn = document.getElementById('uploadBtn');
  const copyBtn = document.getElementById('copyBtn');
  const fileInput = document.getElementById('file');
  const drop = document.getElementById('drop');
  const preview = document.getElementById('preview');
  const prog = document.getElementById('prog');
  const output = document.getElementById('output');

  // Load saved key
  const saved = localStorage.getItem('imgbb_key');
  if (saved) apiKeyInput.value = saved;

  saveKeyBtn.addEventListener('click', () => {
    if (!apiKeyInput.value.trim()) return alert('Please paste your ImgBB API key.');
    localStorage.setItem('imgbb_key', apiKeyInput.value.trim());
    alert('API key saved in this browser.');
  });

  const pickFile = () => fileInput.click();
  drop.addEventListener('click', pickFile);
  drop.addEventListener('dragover', e => { e.preventDefault(); drop.style.background = '#0b1426'; });
  drop.addEventListener('dragleave', e => { drop.style.background = '#0f1627'; });
  drop.addEventListener('drop', e => {
    e.preventDefault();
    drop.style.background = '#0f1627';
    if (e.dataTransfer.files && e.dataTransfer.files[0]) {
      fileInput.files = e.dataTransfer.files;
      onFileSelected();
    }
  });

  fileInput.addEventListener('change', onFileSelected);

  function onFileSelected() {
    const f = fileInput.files[0];
    if (!f) return;
    if (!f.type.startsWith('image/')) { alert('Please select an image.'); return; }
    if (f.size > 32 * 1024 * 1024) { alert('File too large (max ~32MB).'); return; }
    const reader = new FileReader();
    reader.onload = e => {
      preview.src = e.target.result;
      preview.style.display = 'block';
      uploadBtn.disabled = false;
    };
    reader.readAsDataURL(f);
  }

  uploadBtn.addEventListener('click', async () => {
    const key = (apiKeyInput.value || '').trim();
    if (!key) return alert('Enter your ImgBB API key first.');
    const file = fileInput.files[0];
    if (!file) return alert('Please choose an image.');

    uploadBtn.disabled = true; copyBtn.disabled = true;
    prog.style.display = 'block'; prog.value = 0;

    try {
      const form = new FormData();
      form.append('image', file);
      // Optional: set name & expiration via additional fields if desired
      // form.append('name', file.name);

      const res = await fetch('https://api.imgbb.com/1/upload?key=' + encodeURIComponent(key), {
        method: 'POST',
        body: form
      });
      const data = await res.json();
      if (!data.success) throw new Error('Upload failed');

      const url = data.data.url;
      output.style.display = 'block';
      output.textContent = url;
      copyBtn.disabled = false;
      prog.value = 100;
    } catch (err) {
      alert('Upload error. Check API key or try another image.');
      console.error(err);
    } finally {
      uploadBtn.disabled = false;
      setTimeout(() => prog.style.display = 'none', 1200);
    }
  });

  copyBtn.addEventListener('click', async () => {
    const txt = output.textContent;
    if (!txt) return;
    try {
      await navigator.clipboard.writeText(txt);
      copyBtn.textContent = 'Copied!';
      setTimeout(() => copyBtn.textContent = 'Copy Link', 1200);
    } catch {
      alert('Copy failed. Manually select the link and copy.');
    }
  });
</script>
</body>
</html>
